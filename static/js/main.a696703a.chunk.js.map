{"version":3,"sources":["Sequencer/Bar.js","Sequencer/Sequencer.js","App.js","serviceWorker.js","index.js"],"names":["Bar","props","state","hover","value","max","color","e","this","setState","highlight","key","id","className","style","backgroundColor","height","onMouseEnter","enter","onMouseLeave","leave","React","Component","Sequencer","barId","xpos","width","Math","floor","bars","Array","from","length","isDrawing","colors","genColorScheme","baseColor","Prando","name","console","debug","col","i2RGB","parseInt","x","hex2","pow","red","green","blue","rgb","map","toString","join","hex1","rng","hexBase","hex2RGB","i","cols","header","hexAdd","bg","rngCol","bar","barSelected","RGB2hex","g","next","onUpdate","onClick","updateAtPosition","stopDrawing","onMouseMove","drawIfClicked","onMouseDown","startDrawing","onMouseUp","b","min","pageX","currentTarget","offsetLeft","pageY","offsetTop","offsetHeight","offsetWidth","y","h","w","updateBar","updater","App","seqs","pink","levels","round","st","log","forceUpdate","update","visualise","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.a696703a.chunk.js","sourcesContent":["import React from 'react';\n\nexport class Bar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hover: false,\n      value: this.props.max,\n      color: this.props.color\n    };\n  }\n  enter(e) {\n    this.setState({ color: this.props.highlight });\n  }\n  leave(e) {\n    this.setState({ color: this.props.color });\n  }\n  render() {\n    return (\n      <div\n        key={this.props.id}\n        className=\"bar\"\n        style={{backgroundColor: this.state.color,\n                height: this.props.value * 100 + \"%\"\n               }}\n        onMouseEnter={e => this.enter(e)}\n        onMouseLeave={e => this.leave(e)}\n      />);\n  }\n}\n","import React from 'react';\nimport './Sequencer.css';\nimport { Bar } from './Bar';\nimport Prando from 'prando';\n\n\n\nclass Sequencer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const bars = Array.from(\n      {length: this.props.bars},\n      (e) => ({ value: 1 })\n    );\n\n    this.state = {\n      bars,\n      isDrawing: false,\n      colors: this.genColorScheme(\n        this.props.baseColor,\n        new Prando(this.props.name))\n    };\n\n    console.debug(this.state.colors);\n  }\n\n  hex2RGB(col) {\n    return this.i2RGB(parseInt(col, 16));\n  }\n\n  i2RGB(x) {\n    const hex2 = Math.pow(16, 2);\n    return {\n      red: Math.floor(x / Math.pow(16, 4)),\n      green: Math.floor(x / hex2) % hex2,\n      blue: x % hex2\n    };\n  }\n\n  RGB2hex(rgb) {\n    return [rgb.red, rgb.green, rgb.blue]\n      .map(x => Math.floor(x).toString(16))\n      .join(\"\");\n  }\n\n  hexAdd(hex1, hex2) {\n    return {\n      red: hex1.red + hex2.red,\n      blue: hex1.blue + hex2.blue,\n      green: hex1.green + hex2.green\n    };\n  }\n \n  genColorScheme(col, rng) {\n    const hexBase = this.hex2RGB(col);\n    for(const i in hexBase) hexBase[i] /= 2;\n    const cols = {\n      header: this.hexAdd(hexBase, this.hex2RGB(\"111111\")),\n      bg: this.hexAdd(hexBase, this.rngCol(rng)),\n      bar: this.hexAdd(hexBase, this.rngCol(rng)),\n      barSelected: this.hexAdd(hexBase, this.rngCol(rng))\n    };\n    for(const i in cols) cols[i] = this.RGB2hex(cols[i]);\n    return cols;\n  }\n\n  rngCol(rng) {\n    const g = () => rng.next(0, Math.pow(16, 2) / 2);\n    const r = {\n      red: g(),\n      blue: g(),\n      green: g()\n    };\n    return r;\n  }\n\n  startDrawing(e) {\n    this.setState({isDrawing: true});\n  }\n\n  stopDrawing(e) {\n    this.setState({isDrawing: false});\n    this.props.onUpdate(this.state.bars);\n  }\n\n  render() {\n    return (\n      <>\n        <h3\n          style={{backgroundColor: '#' + this.state.colors.header}}\n        >{this.props.name}</h3>\n        <div\n          className=\"sequencer\"\n          style={{backgroundColor: '#' + this.state.colors.bg}}\n          onClick={e => {\n            this.updateAtPosition(e);\n            this.stopDrawing(e);\n          }}\n          onMouseLeave={e => this.setState({isDrawing: false})}\n          onMouseEnter={e => this.setState({isDrawing: false})}\n          onMouseMove={e => this.drawIfClicked(e)}\n          onMouseDown={e => this.startDrawing(e)}\n          onMouseUp={e => this.stopDrawing(e)}\n        >\n          {this.state.bars.map(\n            (b, i) =>\n              <Bar\n                highlight={'#' + this.state.colors.barSelected}\n                color={'#' + this.state.colors.bar}\n                key={i}\n                id={i}\n                max={this.props.max}\n                min={this.props.min}\n                value={b.value}\n              />)}\n\n        </div>\n      </>\n    );\n  }\n\n  barId = (xpos, width) => Math.floor(xpos / (width / this.props.bars));\n\n  drawIfClicked(e) {\n    if(this.state.isDrawing) {\n      this.updateAtPosition(e);\n    }\n  }\n\n\n  updateAtPosition(e) {\n    const [x, y, h, w] = [\n      e.pageX - e.currentTarget.offsetLeft,\n      e.pageY - e.currentTarget.offsetTop,\n      e.currentTarget.offsetHeight,\n      e.currentTarget.offsetWidth\n    ];\n\n    this.updateBar(\n      this.barId(x,w),\n      bar => bar.value = 1-y/h\n      );\n  }\n\n  updateBar(id, updater) {\n    const bars = this.state.bars;\n    updater(bars[id]);\n    this.setState({bars});\n  }\n}\n\nexport default Sequencer;\n","import React from 'react';\nimport Sequencer from './Sequencer/Sequencer.js';\nimport './App.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      min: 0,\n      max: 1,\n      bars: 32,\n      seqs: {\n        pink:  [],\n        red:   [],\n        green: [],\n        blue:  []\n      }\n    };\n  }\n\n  visualise(levels) {\n    return \"levels: \" + levels\n      .map(b => Math.round(b.value * 100))\n      .join(\"|\");\n  }\n  update(st) {\n    console.log(\"updating...\", st);\n    this.setState({...st});\n    this.forceUpdate();\n    console.log(this.state);\n  }\n\n  render(){\n    return (\n      <div className=\"App\">\n        <Sequencer\n          max={this.state.max}\n          min={this.state.min}\n          bars={this.state.bars}\n          baseColor=\"ef0ad4\"\n          name=\"Pink\"\n          onUpdate={bars => {\n            const st = this.state;\n            st.seqs.pink = bars;\n            this.update(st);\n          }}\n        />\n        <pre>{this.visualise(this.state.seqs.pink)}</pre>\n\n        <Sequencer\n          max={this.state.max}\n          min={this.state.min}\n          bars={this.state.bars}\n          baseColor=\"ff0000\"\n          name=\"Red\"\n          onUpdate={bars => {\n            const st = this.state;\n            st.seqs.red = bars;\n            this.update(st);\n          }}\n        />\n        <pre>{this.visualise(this.state.seqs.red)}</pre>\n\n        <Sequencer\n          max={this.state.max}\n          min={this.state.min}\n          bars={this.state.bars}\n          baseColor=\"00ff00\"\n          name=\"Green\"\n          onUpdate={bars => {\n            const st = this.state;\n            st.seqs.green = bars;\n            this.update(st);\n          }}\n        />\n        <pre>{this.visualise(this.state.seqs.green)}</pre>\n\n        <Sequencer\n          max={this.state.max}\n          min={this.state.min}\n          bars={this.state.bars}\n          baseColor=\"0000ff\"\n          name=\"Blue\"\n          onUpdate={bars => {\n            const st = this.state;\n            st.seqs.blue = bars;\n            this.update(st);\n          }}\n        />\n        <pre>{this.visualise(this.state.seqs.blue)}</pre>\n\n      </div>\n\n      );\n  }\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}